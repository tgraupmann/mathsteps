<html>

<head>
    <title>Algebra Examples for Mathsteps</title>
    <script src="dist/mathsteps.js"></script>
</head>

<body>
    <div id="example1"></div>
</body>

<script>

    function doExample1() {

        const example1 = document.getElementById('example1');

        //TODO: FIX
        //WORKS:
        const formula = `(a + 2)*(a + 3)`; // should result as a ^ 2 + 5 * a + 6
        //const formula = `2 * a * b^2 + 3 * b^2 * a`; // should result as 5 * a * b ^ 2
        //const formula = `2 * a^2 * b + 3 * b * a^2`; // should result as 5 * a ^ 2 * b
        //const formula = `(a + 2)*(b - 3)`; // should result as a * b - 3 * a + 2 * b - 6
        //const formula = `3(a + h)^2 + 2(a + h) - 1`; // should result to 3 * a ^ 2 + 6 * a * h + 3 * h ^ 2 + 2 * a + 2 * h - 1
        //const formula = '3 * a ^ 2 + 3 * a * h + 3 * a * h + 3 * h ^ 2 + 2 * a + 2 * h - 1'; // should result to 3 * a ^ 2 + 6 * a * h + 3 * h ^ 2 + 2 * a + 2 * h - 1
        //const formula = '3 * a ^ 2 + 3 * a * h + 3 * h * a + 3 * h ^ 2 + 2 * a + 2 * h - 1'; // should result to 3 * a ^ 2 + 6 * a * h + 3 * h ^ 2 + 2 * a + 2 * h - 1
        //const formula = '2 * a * b + 4 * a * b'; // should result to 6 * a * b
        //const formula = '2*b*a + 4*a*b'; // should result to 6 * a * b
        //const formula = `2*a + 3*a`; // should result as 5 * a
        //const formula = `2 * a * b + 3 * a * b`; // should result as 5 * a * b
        //const formula = `2 * a * b + 3 * b * a`; // should result as 5 * a * b

        let content = `<table border="1">`;

        content += `<tr align="center"><td colspan="5">`
        content += formula;
        content += `</td></tr>`;

        content += `<tr>
                        <td>Before Change</td>
                        <td>Change</td>
                        <td>After Change</td>
                        <td>Latex</td>
                        <td># of Substeps</td>
                    </tr>`;

        const steps = mathsteps.simplifyExpression(formula);

        steps.forEach(step => {
            content += `<tr>`;
            content += `<td>` + step.oldNode.toString() + `</td>`;
            content += `<td>` + step.changeType + `</td>`;
            content += `<td>` + mathsteps.printNode.ascii(step.newNode) + `</td>`;
            content += `<td>` + step.newNode.toTex() + `</td>`;
            content += `<td>` + step.substeps.length + `</td>`;
        });

        content += `</table>`;

        example1.innerHTML = content;
    }

    doExample1();

</script>

</html>